<?xml version="1.0" encoding="UTF-8"?>
<database name="ajwm" defaultIdMethod="native">

  <table name="user" phpName="User">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
    <column name="username" type="varchar" size="64" required="true" primaryString="true" />
    <column name="password" type="varchar" size="36" required="true" />
    <column name="privilege" type="tinyint" required="true" />
    <column name="name" type="varchar" size="128" required="true"/>
    <column name="email" type="varchar" size="255" required="true"/>
    <column name="company_name" type="varchar" size="128" required="false"/>
    <column name="cellphone" type="varchar" size="64" required="true"/>
    <column name="active" type="tinyint" size="1" required="true" default="1" />
    <column name="last_session" type="varchar" size="64" required="false" />
    <column name="last_ip" type="varchar" size="15" required="false" />
    <column name="deleted_on" type="TIMESTAMP" />
    <column name="last_activity_on" type="TIMESTAMP" />
    <column name="saved_session" type="longvarchar" />
    <column name="saved_settings" type="longvarchar" />

    <validator column="username">
      <rule name="unique" message="already exists" />
    </validator>
    <validator column="name">
      <rule name="minLength" value="4" message="MIN ${value}" />
      <rule name="maxLength" value="64" message="MAX ${value}" />
    </validator>
    <validator column="email">
      <rule name="match" value="/^([a-zA-Z0-9])+([\.a-zA-Z0-9_-])*@([a-zA-Z0-9])+(\.[a-zA-Z0-9_-]+)+$/" message="Please enter a valid email address." />
    </validator>
    <validator column="cellphone">
      <rule name="minLength" value="8" message="MIN ${value}" />
      <rule name="maxLength" value="64" message="MAX ${value}" />
    </validator>

    <behavior name="soft_delete">
      <parameter name="deleted_column" value="deleted_on" />
    </behavior>
  </table>

</database>
