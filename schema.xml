<?xml version="1.0" encoding="UTF-8"?>
<database name="ajwm" defaultIdMethod="native">

  <table name="user" phpName="User">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />

    <column name="username" type="varchar" size="64" required="true" primaryString="true" />
    <validator column="username">
      <rule name="unique" message="already exists" />
    </validator>

    <column name="password" type="varchar" size="36" required="true" />
    <column name="privilege" type="tinyint" required="true" />

    <column name="name" type="varchar" size="128" required="true"/>
    <validator column="name">
      <rule name="minLength" value="4" message="MIN ${value}" />
      <rule name="maxLength" value="64" message="MAX ${value}" />
    </validator>

    <column name="email" type="varchar" size="255" required="true"/>
    <validator column="email">
      <rule name="match" value="/^([a-zA-Z0-9])+([\.a-zA-Z0-9_-])*@([a-zA-Z0-9])+(\.[a-zA-Z0-9_-]+)+$/" message="Please enter a valid email address." />
    </validator>

    <column name="company_name" type="varchar" size="128" required="false"/>

    <column name="address" type="varchar" size="128" required="true"/>
    <validator column="address">
      <rule name="minLength" value="4" message="MIN ${value}" />
      <rule name="maxLength" value="128" message="MAX ${value}" />
    </validator>

    <column name="address_secondary" type="varchar" size="128" required="false"/>

    <column name="area_code" type="varchar" size="32" required="true"/>
    <validator column="area_code">
      <rule name="minLength" value="4" message="MIN ${value}" />
      <rule name="maxLength" value="32" message="MAX ${value}" />
    </validator>

    <column name="area" type="varchar" size="64" required="true"/>
    <validator column="area">
      <rule name="minLength" value="2" message="MIN ${value}" />
      <rule name="maxLength" value="32" message="MAX ${value}" />
    </validator>

    <column name="country" type="varchar" size="64" required="true"/>
    <validator column="country">
      <rule name="minLength" value="3" message="MIN ${value}" />
      <rule name="maxLength" value="64" message="MAX ${value}" />
    </validator>

    <column name="telephone" type="varchar" size="64" required="false"/>

    <column name="cellphone" type="varchar" size="64" required="true"/>
    <validator column="cellphone">
      <rule name="minLength" value="8" message="MIN ${value}" />
      <rule name="maxLength" value="64" message="MAX ${value}" />
    </validator>

    <column name="active" type="tinyint" size="1" required="true" default="1" />

    <column name="last_session" type="varchar" size="64" required="false" />
    <column name="last_ip" type="varchar" size="15" required="false" />

    <column name="deleted_on" type="TIMESTAMP" />
    <behavior name="soft_delete">
      <parameter name="deleted_column" value="deleted_on" />
    </behavior>

    <column name="last_activity_on" type="TIMESTAMP" />
  </table>

  <!-- =========================================================== -->
  <!--                         SPOOLERS                            -->
  <!-- =========================================================== -->

  <table name="spool_mail" phpName="SpoolerMail">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
    <column name="status" type="tinyint" required="true" default="0" />
    <column name="log" type="longvarchar" required="false" />
    <column name="content" type="longvarchar" required="true" />
    <behavior name="timestampable" />
  </table>

  <table name="spool_sms" phpName="SpoolerSMS">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
    <column name="status" type="tinyint" required="true" default="0" />
    <column name="log" type="longvarchar" required="false" />
    <column name="content" type="longvarchar" required="true" />
    <behavior name="timestampable" />
  </table>

</database>
